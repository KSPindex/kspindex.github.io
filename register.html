<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sign Up - IndexSpace</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- GSAP 라이브러리 추가 -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #000000;
            color: #e3e3e3;
            overflow-x: hidden;
        }
        .glow-effect {
            position: absolute; top: 50%; left: 50%;
            transform: translate(-50%, -50%); z-index: -1;
        }
        .glow-effect::before, .glow-effect::after {
            content: ''; position: absolute; filter: blur(120px); will-change: transform;
        }
        .glow-effect::before {
            width: 600px; height: 600px;
            background: radial-gradient(circle, rgba(168, 85, 247, 0.3), transparent 70%);
            animation: drift1 20s infinite alternate ease-in-out;
        }
        .glow-effect::after {
            width: 500px; height: 500px;
            background: radial-gradient(circle, rgba(59, 130, 246, 0.3), transparent 70%);
            animation: drift2 25s infinite alternate ease-in-out;
            top: 100px; left: -200px;
        }
        @keyframes drift1 {
            0% { transform: translate(0, 0) rotate(0deg); }
            100% { transform: translate(150px, -100px) rotate(30deg); }
        }
        @keyframes drift2 {
            0% { transform: translate(0, 0) rotate(0deg); }
            100% { transform: translate(-100px, 120px) rotate(-40deg); }
        }
        .header-border {
            background: linear-gradient(to right, rgba(255,255,255,0), rgba(255,255,255,0.1), rgba(255,255,255,0));
            height: 1px;
        }
        .form-input {
            background-color: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: border-color 0.3s ease, box-shadow 0.3s ease;
        }
        .form-input:focus {
            outline: none; border-color: #a855f7; box-shadow: 0 0 15px rgba(168, 85, 247, 0.3);
        }
        .form-button {
            transition: transform 0.2s ease, box-shadow 0.2s ease;
        }
        .form-button:hover {
            transform: scale(1.02); box-shadow: 0 0 25px rgba(168, 85, 247, 0.5);
        }
        .modal-overlay {
            position: fixed; top: 0; left: 0; right: 0; bottom: 0;
            background-color: rgba(0, 0, 0, 0.7); backdrop-filter: blur(8px);
            z-index: 100; display: flex; align-items: center; justify-content: center;
            animation: fadeIn 0.3s ease-out; visibility: hidden; opacity: 0;
            transition: visibility 0s 0.3s, opacity 0.3s ease-out;
        }
        .modal-overlay.visible {
            visibility: visible; opacity: 1; transition: visibility 0s, opacity 0.3s ease-out;
        }
        .modal-content {
            position: relative; background-color: #111; padding: 2rem; border-radius: 1rem;
            border: 1px solid rgba(255, 255, 255, 0.1); width: 90%; max-width: 600px;
            max-height: 80vh; overflow-y: auto; animation: slideIn 0.3s ease-out;
        }
        .modal-content h2 { font-size: 1.5rem; font-weight: bold; margin-bottom: 1rem; color: #fff; }
        .modal-content p, .modal-content li { color: #bbb; margin-bottom: 1rem; line-height: 1.6; }
        .modal-content ul { list-style-position: inside; list-style-type: disc; padding-left: 1rem; }
        .modal-close-btn {
            position: absolute; top: 1rem; right: 1rem; color: #888;
            cursor: pointer; transition: color 0.2s ease; background: none; border: none;
        }
        .modal-close-btn:hover { color: #fff; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        @keyframes slideIn { from { opacity: 0; transform: translateY(-20px); } to { opacity: 1; transform: translateY(0); } }
        
        /* --- 코드 수정점 --- */
        /* 애니메이션을 위한 초기 상태를 CSS에서 제거합니다. */
        /* 이제 자바스크립트가 로드되지 않아도 콘텐츠가 기본적으로 보입니다. */
        /*
        .animated-item {
            opacity: 0;
            transform: translateY(20px);
        }
        */
    </style>
</head>
<body class="antialiased">

    <div class="relative min-h-screen">
        
        <div class="glow-effect"></div>

        <!-- 헤더 (Help? 링크 제거) -->
        <header class="fixed top-0 left-0 right-0 z-50 bg-black/50 backdrop-blur-md">
            <div class="container mx-auto px-4 sm:px-6 lg:px-8">
                <div class="flex items-center justify-between h-16">
                    <div class="flex items-center space-x-8">
                        <a href="/" class="text-xl font-bold tracking-tighter">IndexSpace</a>
                        <nav class="hidden md:flex items-center space-x-6 text-sm font-medium text-gray-300">
                            <a href="/#features" class="hover:text-white transition-colors">Features</a>
                            <a href="#" class="hover:text-white transition-colors">AI Assistant</a>
                            <a href="#" class="hover:text-white transition-colors">Collaboration</a>
                            <a href="#" class="hover:text-white transition-colors">Pricing</a>
                        </nav>
                    </div>
                    <div class="flex items-center space-x-4">
                        <a href="#" class="text-sm font-medium text-gray-300 hover:text-white transition-colors">Log in</a>
                        <a href="/register.html" class="px-4 py-1.5 text-sm font-medium text-white bg-white/10 rounded-full hover:bg-white/20 transition-colors">Sign up</a>
                    </div>
                </div>
            </div>
            <div class="header-border"></div>
        </header>

        <!-- 메인 컨텐츠 -->
        <main class="pt-32 pb-24 flex items-center justify-center">
            <div class="container mx-auto px-4 sm:px-6 lg:px-8 flex flex-col lg:flex-row items-center justify-center gap-16">
                <!-- 회원가입 폼 -->
                <div class="w-full max-w-md">
                    <div class="bg-black/30 backdrop-blur-xl p-8 rounded-2xl border border-white/10">
                        <h1 class="animated-item text-3xl font-extrabold tracking-tighter text-center mb-2">Create your account</h1>
                        <p class="animated-item text-center text-gray-400 mb-8">Welcome to IndexSpace.</p>
                        
                        <form id="register-form">
                            <div class="animated-item mb-4">
                                <label for="email" class="block mb-2 text-sm font-medium text-gray-300">Email</label>
                                <input type="email" id="email" name="email" class="form-input w-full p-3 rounded-lg" required>
                            </div>
                            <div class="animated-item mb-4">
                                <label for="nickname" class="block mb-2 text-sm font-medium text-gray-300">Nickname</label>
                                <input type="text" id="nickname" name="nickname" class="form-input w-full p-3 rounded-lg" required>
                            </div>
                            <div class="animated-item mb-6">
                                <label for="password" class="block mb-2 text-sm font-medium text-gray-300">Password</label>
                                <input type="password" id="password" name="password" class="form-input w-full p-3 rounded-lg" required>
                            </div>
                            <button type="submit" class="animated-item form-button w-full bg-purple-600 hover:bg-purple-700 text-white font-bold py-3 px-4 rounded-full shadow-lg shadow-purple-600/30">
                                Sign Up
                            </button>
                        </form>
                        <p id="message" class="mt-4 text-center text-sm"></p>
                        <div class="animated-item text-center text-xs text-gray-500 mt-6">
                            <p>By signing up, you agree to our 
                                <a href="#" data-modal-target="modal-terms" class="underline hover:text-white">Terms of Service</a> and 
                                <a href="#" data-modal-target="modal-privacy" class="underline hover:text-white">Privacy Policy</a>.
                            </p>
                            <p class="mt-2">
                                Need help? <a href="#" data-modal-target="modal-help" class="underline hover:text-white">Read our guidelines</a>.
                            </p>
                        </div>
                    </div>
                </div>

                <!-- "Why Create an Account?" 섹션 -->
                <div class="w-full max-w-md mt-10 lg:mt-0">
                    <div class="animated-item">
                        <h2 class="text-2xl font-bold text-white mb-4">Why create an account?</h2>
                        <p class="text-gray-400 mb-6">An IndexSpace account is your key to a universe of features designed for modern development and collaboration.</p>
                        <ul class="space-y-4">
                            <li class="flex items-start">
                                <svg class="w-5 h-5 mr-3 mt-1 text-purple-400 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
                                <span><strong>Join the Conversation:</strong> Create posts, leave comments, and engage with a community of developers and creators.</span>
                            </li>
                            <li class="flex items-start">
                                <svg class="w-5 h-5 mr-3 mt-1 text-purple-400 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"></path></svg>
                                <span><strong>Real-time Chat:</strong> Connect with peers and teams instantly through one-on-one or group chats.</span>
                            </li>
                             <li class="flex items-start">
                                <svg class="w-5 h-5 mr-3 mt-1 text-purple-400 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"></path></svg>
                                <span><strong>Personalized Workspace:</strong> Save your preferences, track your activity, and build your own collaborative space.</span>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Modals -->
    <div id="modal-container">
        <!-- Terms of Service Modal -->
        <div id="modal-terms" class="modal-overlay">
            <div class="modal-content">
                <button data-modal-close class="modal-close-btn"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button>
                <h2>Terms of Service</h2>
                <p>Welcome to IndexSpace! These terms and conditions outline the rules and regulations for the use of IndexSpace's Website.</p>
                <p>By accessing this website we assume you accept these terms and conditions. Do not continue to use IndexSpace if you do not agree to take all of the terms and conditions stated on this page.</p>
                <ul><li>You must be at least 13 years old to use this service.</li><li>You are responsible for any activity that occurs under your screen name.</li><li>You must not abuse, harass, threaten, impersonate or intimidate other IndexSpace users.</li><li>You may not use the IndexSpace service for any illegal or unauthorized purpose.</li></ul>
                <p>We reserve the right to modify these terms at any time. Your continued use of the site after any such changes constitutes your acceptance of the new terms.</p>
            </div>
        </div>
        <!-- Privacy Policy Modal -->
        <div id="modal-privacy" class="modal-overlay">
            <div class="modal-content">
                <button data-modal-close class="modal-close-btn"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button>
                <h2>Privacy Policy</h2>
                <p>Your privacy is important to us. It is IndexSpace's policy to respect your privacy regarding any information we may collect from you across our website.</p>
                <p>We only ask for personal information when we truly need it to provide a service to you. We collect it by fair and lawful means, with your knowledge and consent. We also let you know why we’re collecting it and how it will be used.</p>
                <p>We only retain collected information for as long as necessary to provide you with your requested service. What data we store, we’ll protect within commercially acceptable means to prevent loss and theft, as well as unauthorized access, disclosure, copying, use or modification.</p>
            </div>
        </div>
        <!-- Help Modal -->
        <div id="modal-help" class="modal-overlay">
            <div class="modal-content">
                <button data-modal-close class="modal-close-btn"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button>
                <h2>Creating Your IndexSpace Account</h2>
                <p>Welcome! Here's a quick guide to get you started:</p>
                <ul><li><strong>Email:</strong> Please use a valid email address. This will be used for account verification and important notifications.</li><li><strong>Nickname:</strong> This will be your unique public name on IndexSpace. It can be changed later, but must be unique.</li><li><strong>Password:</strong> Choose a strong, secure password. We recommend a mix of letters, numbers, and symbols.</li></ul>
                <p>If you encounter any issues, please feel free to contact our support team. We're happy to help!</p>
            </div>
        </div>
    </div>

    <script>
        // --- Form Submission Logic ---
        const form = document.getElementById('register-form');
        const messageEl = document.getElementById('message');
        form.addEventListener('submit', async (e) => {
            e.preventDefault();
            messageEl.textContent = 'Processing...';
            messageEl.className = 'mt-4 text-center text-sm text-gray-400';
            const formData = new FormData(form);
            const data = Object.fromEntries(formData.entries());
            try {
                const response = await fetch('/api/register', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(data),
                });
                const result = await response.json();
                if (response.ok) {
                    messageEl.textContent = "Success! Welcome to IndexSpace.";
                    messageEl.className = 'mt-4 text-center text-sm text-green-400';
                    form.reset();
                } else {
                    messageEl.textContent = `Error: ${result.message}`;
                    messageEl.className = 'mt-4 text-center text-sm text-red-400';
                }
            } catch (error) {
                console.error('Error:', error);
                messageEl.textContent = 'A client-side error occurred.';
                messageEl.className = 'mt-4 text-center text-sm text-red-400';
            }
        });

        // --- Modal & Animation Logic ---
        document.addEventListener('DOMContentLoaded', () => {
            // Modal Logic
            const openModalTriggers = document.querySelectorAll('[data-modal-target]');
            const closeModalTriggers = document.querySelectorAll('[data-modal-close]');
            openModalTriggers.forEach(trigger => {
                trigger.addEventListener('click', (e) => {
                    e.preventDefault();
                    const modal = document.getElementById(trigger.getAttribute('data-modal-target'));
                    if (modal) modal.classList.add('visible');
                });
            });
            const closeAllModals = () => {
                document.querySelectorAll('.modal-overlay.visible').forEach(modal => modal.classList.remove('visible'));
            };
            closeModalTriggers.forEach(trigger => trigger.addEventListener('click', closeAllModals));
            document.querySelectorAll('.modal-overlay').forEach(overlay => {
                overlay.addEventListener('click', (e) => { if (e.target === overlay) closeAllModals(); });
            });
            document.addEventListener('keydown', (e) => { if (e.key === "Escape") closeAllModals(); });

            // --- 코드 수정점 ---
            // GSAP Animation Logic (더 안정적인 방식으로 수정)
            // 1. 먼저 자바스크립트로 요소를 숨깁니다.
            gsap.set(".animated-item", { autoAlpha: 0, y: 20 });

            // 2. 그 다음 애니메이션을 실행합니다.
            gsap.to(".animated-item", {
                duration: 0.8,
                y: 0,
                autoAlpha: 1, // opacity와 visibility를 동시에 제어
                stagger: 0.15,
                ease: "power3.out",
                delay: 0.3
            });
        });
    </script>

</body>
</html>
